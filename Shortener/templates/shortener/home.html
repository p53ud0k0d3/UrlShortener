{% load widget_tweaks %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>UrlShortener</title>
    <!--Include Bootstrap CSS-->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <script>
        function validate()
        {
            var str = document.getElementById("id_url").value;
            regexp =  /^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;
            
            if (regexp.test(str)) return true;
            else {
                alert("Not a valid url.");
                return false;
            }
        }
    </script>
</head>

<body>
    <div class="container-fluid">
    	<h1 class="text-center">URL Shortner</h1>
    	<div class="row">
	        <form role="form" action="" method="post" class="col-md-8 col-md-offset-2" onsubmit="return validate()">
	        	{% csrf_token %}
	        	<div class="form-group">
	        		<label for="id_url">Long URL:</label>
	        		    {{ form.url|attr:"class:form-control input-lg"|attr:"placeholder:Example: https://www.youtube.com/watch?v=Y2VF8tmLFHw" }}
	        		<p class="help-block text-right">Enter the lengthy URL you want to shorten.</p>
	        	</div>
	        	{% if error %}
	        	    <div class="text-center container">Enter the https:// or http:// in the starting of URL</div>
	        	{% endif %}
	        	<div class="form-group col-md-4 col-md-offset-4">
	        		<label for="id_host">Service/Host:</label>
	        		{{ form.host|attr:"class:form-control" }}
	        		<p class="help-block text-center">Choose the service you want to use.</p>
	        	</div>
	        	<div class="form-group text-center col-md-12">
	            	<button type="submit" class="btn btn-primary btn-lg">Submit</button>
	            </div>
	        </form>
        </div>
        <div class="row">
            <div class="text-center col-md-6 col-md-offset-3">
                <h2>{{ short_url }}</h2>
                {% if short_url %}
                    <img src="http://chart.apis.google.com/chart?cht=qr&chl={{ short_url }}&chs=180x180" />
                {% endif %}
            </div>
        </div>
    </div>
</body>    

</html> 
